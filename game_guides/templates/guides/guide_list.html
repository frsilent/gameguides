{% extends 'base.html' %}
{% load embed_video_tags %}
{% load endless %}
{% load staticfiles %}

{% block page_title %}Guides Page{% endblock page_title %}
{% block ng_app %}ng-app="guides.list"{% endblock %}
{% block title %}Game Guides - Guides{% endblock title %}

{% block content %}
    <div class="row" id="top5-pane">
        <div class="sample-video-container">
            {% for guide in top5 %}
                {% video guide.video as vid %}
                <div class="col-xs-6 col-md-4 {% if forloop.first %}first-video{% endif %}">
                    <a class="thumbnail sample-video" href="{% url 'guide-detail' guide.id %}">
                        <img src="{{ vid.thumbnail }}">
                    </a>
                </div>
                {% endvideo %}
            {% endfor %}
        </div>
    </div>

    <div class="row" id="filter-pane" ng-controller="{% block ng_controller %}GuideListController{% endblock %}">
        <div class="filter-list">
        {% for category in categories %}
{#            <input type="checkbox" ng-model="categories" ng-click="categories.{{ category.id }} = true">#}
            <input type="checkbox" ng-click="toggleCategory({{ category.id }})">
{#            <input type="checkbox" ng-model="categories[{{ forloop.counter }}]" ng-checked="categories[{{ forloop.counter }}].checked">#}
            {{ category.name }}
        {% endfor %}
        </div>
        {% verbatim %}
        <ul>
            <li ng-repeat="guide in guides | filter: category_filter: true">{{ guide.name }}{{ guide.categories }}</li>
        </ul>
        {% endverbatim %}
    </div>
{% endblock content %}

{% block extra_js %}
    {{ block.super }}
    <script src="{% static 'js/guide-list.js' %}"></script>
{% endblock %}
